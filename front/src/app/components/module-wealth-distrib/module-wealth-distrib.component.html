<div class="module overflow-auto">
	<button mat-raised-button [color]="" (click)="home()">Revenir √† l'accueil</button>
	<h1>Visualisation de Distribution de Richesse</h1>
	<div class="d-flex flex-row flex-wrap justify-content-center gap-4">
		<div>
			<div class="game-explanation">
				<h3>Comment fonctionne la R√©partition ?</h3>
				<p>
					1. Le montant total est r√©parti diff√©remment selon le param√®tre P. üí∏<br>
					2. Un P bas signifie une r√©partition plus √©gale. ü§ù<br>
					3. Un P √©lev√© cr√©e plus de diff√©rences entre les personnes. üìä
				</p>
			</div>
			<div class="stats">
				<p>L‚Äôindice de Gini mesure les in√©galit√©s de distribution  dans une population.</p>
				<p>(souvent de revenus ou richesses)</p>
				<p>- 0 = √©galit√© parfaite (tout le monde a la m√™me chose)</p>
				<p>- 1 = in√©galit√© totale (une seule personne a tout).</p>
				<p>Plus l‚Äôindice est proche de 1, plus la r√©partition est in√©galitaire.</p>
			</div>
		</div>

		<mat-card class="cardParam card">
			<div class="controls d-flex flex-column">
				<div class="control-group">
					<label for="total">Montant Total:</label>
					<input type="range" id="total" [value]="total" min="100" max="1000000000" step="100"
								 (input)="onTotalChange($event)">
					<div class="value-display">
						<span>100</span>
						<span>{{ total }}</span>
						<span>1 000 000 000</span>
					</div>
				</div>
				<div class="control-group">
					<label for="numPlayers">Nombre de personnes:</label>
					<input type="range" id="numPlayers" [value]="numPlayers" min="2" max="1000" step="1"
								 (input)="onNumPlayersChange($event)">
					<div class="value-display">
						<span>2</span>
						<span>{{ numPlayers }}</span>
						<span>1000</span>
					</div>
				</div>
				<div class="control-group">
					<label for="paramP">Param√®tre P (in√©galit√©):</label>
					<input type="range" id="paramP" [value]="paramP" min="0" max="3" step="0.1" (input)="onParamPChange($event)">
					<div class="value-display">
						<span>0</span>
						<span>{{ paramP.toFixed(1) }}</span>
						<span>3</span>
					</div>
					<p>Indice de Gini: {{ giniIndex.toFixed(4) }}</p>
					<p>Ratio Haut/Bas: {{ ratioTopBottom.toFixed(2) }}</p>
				</div>
			</div>
		</mat-card>
		<mat-card class="flex-grow-1 card">
			<div class="toggle-view">
				<button [class.active]="currentChartType === 'bar'" (click)="changeChartType('bar')">Graphique en Barres
				</button>
				<button [class.active]="currentChartType === 'line'" (click)="changeChartType('line')">Courbe</button>
				<button [class.active]="currentChartType === 'pie'" (click)="changeChartType('pie')">Camembert</button>
			</div>

			<div class="chart-container">
				<canvas #distributionCanvas></canvas>
			</div>
		</mat-card>
	</div>
	<div class="results">
		<h2>R√©sultats de la Distribution</h2>
		<table>
			<thead>
			<tr>
				<th>Personne</th>
				<th>Montant</th>
				<th>% du Total</th>
			</tr>
			</thead>
			<tbody>
			<tr *ngFor="let row of tableData">
				<td>{{ row.player }}</td>
				<td>{{ row.amount.toFixed(2) }}</td>
				<td>{{ row.percentage.toFixed(2) }}%</td>
			</tr>
			</tbody>
		</table>
	</div>
</div>
